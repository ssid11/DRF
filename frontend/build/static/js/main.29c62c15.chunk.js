(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(t,e,n){},41:function(t,e,n){},66:function(t,e,n){"use strict";n.r(e);var c=n(1),r=n.n(c),s=n(34),o=n.n(s),a=(n(40),n(11)),i=n(12),j=n(14),u=n(13),h=(n.p,n(41),n(9)),l=n.n(h),d=n(24),b=n(0),x=function(t){var e=t.user;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.username}),Object(b.jsx)("td",{children:e.first_name}),Object(b.jsx)("td",{children:e.last_name}),Object(b.jsx)("td",{children:e.email})]})},O=function(t){var e=t.users;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"\u041d\u0438\u043a"}),Object(b.jsx)("th",{children:"\u0418\u043c\u044f"}),Object(b.jsx)("th",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),Object(b.jsx)("th",{children:"\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b"}),e.map((function(t){return Object(b.jsx)(x,{user:t})}))]})},p=function(t){var e=t.project,n=t.deleteProject;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.name}),Object(b.jsx)("td",{children:e.repo}),Object(b.jsx)("td",{children:e.devops}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n(e.id)},type:"button",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})},f=function(t){var e=t.projects,n=t.deleteProject;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(b.jsx)("th",{children:"\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439"}),Object(b.jsx)("th",{children:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438"}),Object(b.jsx)("th",{}),e.map((function(t){return Object(b.jsx)(p,{project:t,deleteProject:n})}))]})},v=n(4),m=function(t){var e=t.todo,n=t.deleteToDo;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:1==e.active?"\u0414\u0430":"\u041d\u0435\u0442"}),Object(b.jsx)("td",{children:e.author}),Object(b.jsx)("td",{children:e.text}),Object(b.jsx)("td",{children:e.on_created}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{type:"button",onClick:function(){return n(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})},g=function(t){var e=t.todos,n=t.deleteToDo;return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0437\u0430\u043c\u0435\u0442\u043e\u043a"}),Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0430?"}),Object(b.jsx)("th",{children:"\u0410\u0432\u0442\u043e\u0440"}),Object(b.jsx)("th",{children:"\u0422\u0435\u043a\u0441\u0442"}),Object(b.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"}),Object(b.jsx)("th",{}),e.map((function(t){return Object(b.jsx)(m,{todo:t,deleteToDo:n})}))]}),Object(b.jsx)("div",{children:Object(b.jsx)(v.b,{to:"/todos/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})},k=function(){return Object(b.jsx)("footer",{children:Object(b.jsxs)("p",{children:["Copyright \xa9 ",Object(b.jsx)("strong",{children:'\u041e\u041e\u041e "\u0420\u043e\u0433\u0430 \u0438 \u043a\u043e\u043f\u044b\u0442\u0430".'})," Django with React and REST API. 2021 \u0433."]})})},_=function(t){var e=t.location;return Object(b.jsx)("div",{children:Object(b.jsxs)("h1",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",e.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})})},y=n(19),C=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var c;return Object(a.a)(this,n),(c=e.call(this,t)).state={login:"",password:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(y.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){this.props.get_token(this.state.login,this.state.password),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(b.jsx)("input",{type:"text",name:"login",placeholder:"\u041b\u043e\u0433\u0438\u043d",value:this.state.login,onChange:function(e){return t.handleChange(e)}}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:this.state.password,onChange:function(e){return t.handleChange(e)}}),Object(b.jsx)("input",{type:"submit",value:"\u0412\u0445\u043e\u0434"})]})}}]),n}(r.a.Component),S=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var c;return Object(a.a)(this,n),(c=e.call(this,t)).state={project:"",author:"",text:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(y.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){this.props.createToDo(this.state.project,this.state.author,this.state.text),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(b.jsx)("label",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443"}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"text",children:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"}),Object(b.jsx)("input",{type:"text",name:"text",value:this.state.text,onChange:function(e){return t.handleChange(e)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"author",children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430"}),Object(b.jsx)("select",{name:"author",onChange:function(e){return t.handleChange(e)},children:this.props.authors.map((function(t){return Object(b.jsx)("option",{value:t.id,children:t.username})}))})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"project",children:" \u041f\u0440\u043e\u0435\u043a\u0442"}),Object(b.jsx)("select",{className:"form-control",name:"project",onChange:function(e){return t.handleChange(e)},children:this.props.projects.map((function(t){return Object(b.jsx)("option",{value:t.id,children:t.name})}))})]}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{className:"btn-success",type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})}}]),n}(r.a.Component),D=n(2),T=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var c;return Object(a.a)(this,n),(c=e.call(this,t)).state={users:[],projects:[],todos:[],token:"",username:""},c}return Object(i.a)(n,[{key:"set_token",value:function(t,e){var n=this,c=new d.a;c.set("token",t),c.set("username",e),this.setState({token:t,username:e},(function(){return n.load_data()}))}},{key:"is_auth",value:function(){return!!this.state.token}},{key:"logout",value:function(){this.set_token("")}},{key:"get_token_from_storage",value:function(){var t=this,e=new d.a,n=e.get("token"),c=e.get("username");this.setState({token:n,username:c},(function(){return t.load_data()}))}},{key:"get_headers",value:function(){var t={"Content-Type":"application/json"};return this.is_auth()&&(t.Authorization="Token "+this.state.token),t}},{key:"deleteProject",value:function(t){var e=this,n=this.get_headers(),c="http://127.0.0.1:8000/api/projects/"+t+"/";l.a.delete(c,{headers:n}).then((function(){e.load_data()}))}},{key:"deleteToDo",value:function(t){var e=this,n=this.get_headers(),c="http://127.0.0.1:8000/api/todos/"+t+"/";l.a.delete(c,{headers:n}).then((function(){e.load_data()}))}},{key:"load_data",value:function(){var t=this,e=this.get_headers();l.a.get("http://127.0.0.1:8000/api/users",{headers:e}).then((function(e){var n=e.data;t.setState({users:n})})).catch((function(e){t.setState({users:[]}),console.log(e)})),l.a.get("http://127.0.0.1:8000/api/projects",{headers:e}).then((function(e){var n=e.data;t.setState({projects:n})})).catch((function(e){t.setState({projects:[]}),console.log(e)})),l.a.get("http://127.0.0.1:8000/api/todos",{headers:e}).then((function(e){var n=e.data;t.setState({todos:n})})).catch((function(e){t.setState({todos:[]}),console.log(e)}))}},{key:"componentDidMount",value:function(){this.load_data()}},{key:"get_token",value:function(t,e){var n=this;l.a.post("http://127.0.0.1:8000/api-token-auth/",{username:t,password:e}).then((function(e){n.set_token(e.data.token,t)})).catch((function(t){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"createToDo",value:function(t,e,n){var c=this.get_headers(),r={project:t,author:e,text:n};l.a.post("http://127.0.0.1:8000/api/todos/",r,{headers:c});this.load_data()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(v.a,{children:[Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(v.b,{to:"/",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})}),Object(b.jsx)("li",{children:Object(b.jsx)(v.b,{to:"/projects",children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"})}),Object(b.jsx)("li",{children:Object(b.jsx)(v.b,{to:"/todos",children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"})}),Object(b.jsx)("li",{children:this.is_auth()?Object(b.jsx)("button",{onClick:function(){return t.logout()},children:" \u0412\u044b\u0439\u0442\u0438 "}):Object(b.jsx)(v.b,{to:"/login/",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(b.jsxs)("p",{children:[" \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",this.is_auth()?this.state.username:"\u043d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d"," "]})]})}),Object(b.jsxs)(D.d,{children:[Object(b.jsx)(D.b,{exact:!0,path:"/",component:function(){return Object(b.jsx)(O,{users:t.state.users})}}),Object(b.jsx)(D.b,{exact:!0,path:"/projects",component:function(){return Object(b.jsx)(f,{projects:t.state.projects,deleteProject:function(e){return t.deleteProject(e)}})}}),Object(b.jsx)(D.b,{exact:!0,path:"/todos",component:function(){return Object(b.jsx)(g,{todos:t.state.todos,deleteToDo:function(e){return t.deleteToDo(e)}})}}),Object(b.jsx)(D.b,{exact:!0,path:"/todos/create",component:function(){return Object(b.jsx)(S,{authors:t.state.users,projects:t.state.projects,createToDo:function(e,n,c){return t.createToDo(e,n,c)}})}}),Object(b.jsx)(D.b,{exact:!0,path:"/login",component:function(){return Object(b.jsx)(C,{get_token:function(e,n){return t.get_token(e,n)}})}}),Object(b.jsx)(D.a,{from:"/users",to:"/"}),Object(b.jsx)(D.b,{component:_})]})]}),Object(b.jsx)(k,{})]})}}]),n}(r.a.Component),w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),s(t),o(t)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(T,{})}),document.getElementById("root")),w()}},[[66,1,2]]]);
//# sourceMappingURL=main.29c62c15.chunk.js.map